module standAloneMuons = StandAloneMuonProducer {
    
    InputTag InputObjects = MuonSeed
    
    using MuonServiceProxy
    
    using MuonTrackLoaderForSTA
    
    PSet STATrajBuilderParameters = {

	# where you want the seed (in,out)
	string SeedPosition = "in"
	# a precise propagation direction can be choosen accordingly with the 
	# above seed position
	string SeedPropagator = "SteppingHelixPropagatorAny"

	string NavigationType = "Standard"
	
	bool DoBackwardRefit = true
	bool DoSmoothing = false
	
	PSet RefitterParameters = {
	    
	    InputTag DTRecSegmentLabel = dt4DSegments
	    InputTag CSCRecSegmentLabel = cscSegments
	    InputTag RPCRecSegmentLabel = rpcRecHits
	    bool EnableDTMeasurement = true
	    bool EnableCSCMeasurement = true
	    bool EnableRPCMeasurement = true
	    
	    string FitDirection = "insideOut"
	    
	    string Propagator = "SteppingHelixPropagatorAny"
	    
	    double MaxChi2 = 1000 #25.0
	    double NumberOfSigma = 3.0 
	    
	    PSet MuonTrajectoryUpdatorParameters = {
		
		double MaxChi2 = 1000 #25.0
		int32 Granularity = 0
		bool RescaleError = false
		double RescaleErrorFactor = 100.		
	    }	
	}
	
	PSet BWFilterParameters = {
	    
	    InputTag DTRecSegmentLabel = dt4DSegments
	    InputTag CSCRecSegmentLabel = cscSegments
	    InputTag RPCRecSegmentLabel = rpcRecHits
	    bool EnableDTMeasurement = true
	    bool EnableCSCMeasurement = true
	    bool EnableRPCMeasurement = true
	    
	    string BWSeedType = "fromGenerator"
	    string FitDirection = "outsideIn"
	    
	    string Propagator = "SteppingHelixPropagatorAny"	
	    
	    double MaxChi2 = 25.0
	    double NumberOfSigma = 3.0
	    
	    PSet MuonTrajectoryUpdatorParameters = {
		
		double MaxChi2 = 25.0
		int32 Granularity = 2
		bool RescaleError = false
		double RescaleErrorFactor = 100. 
	    }	
	}
	
	PSet SmootherParameters = {
	    double MaxChi2 = 25.0
	    double NumberOfSigma = 3.0
	    double ErrorRescalingFactor = 10.0
	    # Pay attention when you change the standard reconstruction directions
	    # (i.e. seed = "in", FWfit = "insideOut" and BWfit = "outsideIn")
	    # because if you revert it
	    # (i.e. seed = "out", FWfit = "outsideIn" and BWfit = "insideOut")
	    # you have to change the following propagator as well
	    # (it must become "SteppingHelixPropagatorOpposite". By default is is NOT
	    # in the MuonServiceProxy.cff, so you have to load it.)
	    string Propagator = "SteppingHelixPropagatorAlong"
	}
    }
}
